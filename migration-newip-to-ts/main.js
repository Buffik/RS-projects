(()=>{"use strict";var e,t={};function n(e,t,n){const o=function(e,t){const n=e.querySelector(t);if(!n)throw new Error(`Selector ${t} didn't match any elements.`);return n}(e,n);if(!(o instanceof t))throw new Error(`Selector ${n} matched ${o} which is not an ${t}`);return o}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),function(e){e[e.Unauthorized=401]="Unauthorized",e[e.NotFound=404]="NotFound"}(e||(e={}));const o=class{baseLink;options;constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e,options:t={}},n=(e=>{e||console.error("No callback for GET response")})){this.load("GET",e,n,t)}errorHandler(t){if(!t.ok&&(t.status===e.Unauthorized||t.status===e.NotFound))throw Error(t.statusText);return t}makeUrl(e,t){const n={...this.options,...e};let o=`${this.baseLink}${t}?`;return Object.keys(n).forEach((e=>{o+=`${e}=${n[e]}&`})),o.slice(0,-1)}load(e,t,n,o={}){fetch(this.makeUrl(o,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>n(e))).catch((e=>console.error(e)))}},r=class extends o{constructor(){super("https://nodenews.up.railway.app/",{apiKey:"d0922def67184abdbc97ef1b86bf68f4"})}},s=class extends r{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let n=e.target;const o=e.currentTarget;for(;n!==o&&o&&n;){if(n.classList.contains("source__item")){const e=n.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==e&&e&&(o.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}n=n.parentNode}}};class c{button=n(document,HTMLDivElement,".button-up");renderButton(){window.addEventListener("scroll",(()=>{(window.scrollY||document.documentElement.scrollTop)>500?this.button.classList.remove("button-up__disabled"):this.button.classList.add("button-up__disabled")})),this.button.onclick=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}}}t.p;class i{news=new class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,o=document.createDocumentFragment(),r=n(document,HTMLTemplateElement,"#newsItemTemp");t.forEach(((e,t)=>{const s=r.content.cloneNode(!0);t%2&&n(s,HTMLDivElement,".news__item").classList.add("alt");const c=n(s,HTMLDivElement,".news__meta-photo");c.style.backgroundImage="url(./img/newsPlaceholder.jpg)",c.style.backgroundImage=`url(${e.urlToImage?e.urlToImage:"./img/newsPlaceholder.jpg"})`,n(s,HTMLLIElement,".news__meta-author").textContent=e.author||e.source.name,n(s,HTMLLIElement,".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),n(s,HTMLHeadingElement,".news__description-title").textContent=e.title,n(s,HTMLHeadingElement,".news__description-source").textContent=e.source.name,n(s,HTMLParagraphElement,".news__description-content").textContent=e.description,n(s,HTMLAnchorElement,".news__read-more a").setAttribute("href",e.url),o.append(s)}));const s=n(document,HTMLDivElement,".news");s.innerHTML="",s.appendChild(o)}};sources=new class{draw(e){const t=document.createDocumentFragment(),o=n(document,HTMLTemplateElement,"#sourceItemTemp");e.forEach((e=>{const r=o.content.cloneNode(!0),s=n(r,HTMLSpanElement,".source__item-name"),c=n(r,HTMLDivElement,".source__item");s.textContent=e.name,c.setAttribute("data-source-id",e.id),t.append(r)})),n(document,HTMLDivElement,".sources").append(t)}};buttonUp=new c;drawNews(e){const t=e?.articles?e?.articles:[];this.news.draw(t),this.buttonUp.renderButton()}drawSources(e){const t=e?.sources?e?.sources:[];this.sources.draw(t)}}(new class{controller=new s;view=new i;start(){n(document,HTMLDivElement,".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e)))}}).start()})();